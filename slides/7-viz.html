<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Visualising transport data</title>
    <meta charset="utf-8" />
    <meta name="author" content="Robin Lovelace" />
    <meta name="date" content="2019-03-26" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/leaflet/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet/leaflet.js"></script>
    <link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
    <script src="libs/Proj4Leaflet/proj4-compressed.js"></script>
    <script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding/leaflet.js"></script>
    <script src="libs/leaflet-providers/leaflet-providers.js"></script>
    <script src="libs/leaflet-providers-plugin/leaflet-providers-plugin.js"></script>
    <link href="libs/HomeButton/home-button.css" rel="stylesheet" />
    <script src="libs/HomeButton/home-button.js"></script>
    <script src="libs/HomeButton/easy-button-src.min.js"></script>
    <link href="libs/PopupTable/popup.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Visualising transport data
## ðŸ—º <br/>from base (rock) to shiny (clouds)
### Robin Lovelace
### 2019-03-26

---





layout: true
background-image: url(img/r_geocomp_background.png)
background-size: cover

---

# A brief history of vizualisation I

- Neo Babylonian (626 BC - 539 BC) temple plan
Source:
(Talbert, 2014)

&lt;img src="https://geocompr.github.io/workshops/erum2018/img/neo-babylon-temple-map-circa-600-bc.png" width="50%" /&gt;

---

# A brief history of vizualisation II

- Neo Babylonian (626 BC - 539 BC) map of the world
Source:
(Talbert, 2014)

&lt;img src="https://geocompr.github.io/workshops/erum2018/img/babylon-map.png" width="50%" /&gt;

---

# A brief history of geographic vizualisation III

- Humboldt's NaturgemÃ¤lde (1807, *Geography of Plants*)

![](https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Zentralbibliothek_Z%C3%BCrich_-_Ideen_zu_einer_Geographie_der_Pflanzen_nebst_einem_Naturgem%C3%A4lde_der_Tropenl%C3%A4nder_-_000012142.jpg/2560px-Zentralbibliothek_Z%C3%BCrich_-_Ideen_zu_einer_Geographie_der_Pflanzen_nebst_einem_Naturgem%C3%A4lde_der_Tropenl%C3%A4nder_-_000012142.jpg)&lt;!-- --&gt;


&lt;!-- - The mappa mundi - largest Mediaval map surviving (~1300 **AD**) --&gt;
&lt;!-- knitr::include_graphics("https://upload.wikimedia.org/wikipedia/commons/4/48/Hereford-Karte.jpg?download") --&gt;

---

## Good, bad, ugly, wrong

- Aim must be good graphics, but first it's important to avoid pitfalls

&lt;img src="https://serialmentor.com/dataviz/introduction_files/figure-html/ugly-bad-wrong-examples-1.png" width="80%" /&gt;

---


## What is data visualisation?

&gt; Data visualization is part art and part science. The challenge is to get the art right without getting the science wrong and vice versa. A data visualization first and foremost has to accurately convey the data. 

--

&gt; In my experience, scientists frequently (though not always!) know how to visualize data without being grossly misleading. However, they may not have a well developed sense of visual aesthetics, and they may inadvertantly make visual choices that detract from their desired message. Designers, on the other hand, may prepare visualizations that look beautiful but play fast and loose with the data.

Source: [Fundamentals of Data Vizualisation](https://serialmentor.com/dataviz/)

---

# A brief history of geographic data viz in R

"The core R engine was not designed specifically for the display and analysis
of maps, and the limited interactive facilities it offers have drawbacks in this
area" (Bivand, Pebesma, and GÃ³mez-Rubio, 2013).

--

Five years later...

--

"An example showing R's flexibility and evolving geographic capabilities is **leaflet**
(Cheng, Karambelkar, and Xie, 2018),
a package for making interactive maps that has been extended by the R community, as we'll see in Chapter 9" 
(Lovelace, Nowosad, and Meunchow, 2018).

---

# R's 'base' graphics: sp



![](7-viz_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;

---

# Base R graphics: sp code

Credit: [asdar-book.org/](http://asdar-book.org/), reproducible code accompanying the book Applied Spatial Data Analysis with R (Pebesma et al. 2013).


```r
library(sp)
library(spData)
nz_sp = as(nz, "Spatial")
plot(nz_height_sp, cex = 2)
title("points")
plot(nz_sp, col = "grey")
plot(nz_height, add = TRUE, col = "red")
```

--

## Observations

- Passes arguments (e.g `cex` for symbol size) to `graphics::plot()`
- New command for each additional 'layer' (e.g. `title()`, `plot(..., add = TRUE)`)
- Black and white default output style
- Fast

---

# Base R graphics: sf 


```r
plot(nz)
```

![](7-viz_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

---

# Base R graphics: sf II


```r
plot(st_geometry(nz))
plot(nz_height, add = TRUE)
```

```
## Warning in plot.sf(nz_height, add = TRUE): ignoring all but the first
## attribute
```

```r
sf_cols = sf.colors(n = 2, alpha = 0.2)
nz$col = factor(x = nz$Island, labels = sf_cols)
plot(st_geometry(nz), col = as.character(nz$col))
```

&lt;div class="figure"&gt;
&lt;img src="7-viz_files/figure-html/unnamed-chunk-9-1.png" alt=" " width="40%" /&gt;&lt;img src="7-viz_files/figure-html/unnamed-chunk-9-2.png" alt=" " width="40%" /&gt;
&lt;p class="caption"&gt; &lt;/p&gt;
&lt;/div&gt;

---

# sf graphics: code


```r
# facet plots by default
plot(nz) 
# plot just geometry, ready for new layers:
plot(st_geometry(nz), reset = FALSE)
# addition of new layers
plot(nz_height, add = TRUE)
# transparency
sf_cols = sf.colors(n = 2, alpha = 0.2)
nz$col = factor(x = nz$Island, labels = sf_cols)
plot(st_geometry(nz), col = as.character(nz$col))
#  see ?plot.sf for more
```

--

## Observations

- Facets by default: useful for seeing patterns.
- Transparency new, `add = ...` argument the sam.e
- You can go far with base R graphics 
(Murrell, 2016).

---

# tmap

- A diverse dedicated mapping R package


```r
library(tmap)
tm_shape(nz) +
  tm_polygons("Median_income", palette = "RdYlBu")
```

![](7-viz_files/figure-html/unnamed-chunk-11-1.png)&lt;!-- --&gt;

---

# Why tmap?

- It is powerful and flexible.
- Concise syntax, attractive maps with minimal code, familiar to **ggplot2** users.
- Unique capability: same code -&gt; static + interactive maps with switch `tmap_mode()`.
- Wide range of spatial classes (including `raster` objects) supported.
- Well documented + developed --- see [`tmap-nutshell`](https://cran.r-project.org/web/packages/tmap/vignettes/tmap-nutshell.html) and JSS paper
(Tennekes, 2018).


---

# tmap basics


```r
# Add fill layer to nz shape
tm_shape(nz) + tm_fill() 
# Add border layer to nz shape
tm_shape(nz) + tm_borders() 
# Add fill and border layers to nz shape
tm_shape(nz) + tm_fill() + tm_borders() 
```

&lt;div class="figure"&gt;
&lt;img src="7-viz_files/figure-html/unnamed-chunk-12-1.png" alt="tmap basics" width="32%" /&gt;&lt;img src="7-viz_files/figure-html/unnamed-chunk-12-2.png" alt="tmap basics" width="32%" /&gt;&lt;img src="7-viz_files/figure-html/unnamed-chunk-12-3.png" alt="tmap basics" width="32%" /&gt;
&lt;p class="caption"&gt;tmap basics&lt;/p&gt;
&lt;/div&gt;

&lt;!-- --- --&gt;

&lt;!-- # tmap objects --&gt;

&lt;!-- --- --&gt;

&lt;!-- # Aesthetics --&gt;

&lt;!-- --- --&gt;

&lt;!-- # Layouts --&gt;

&lt;!-- --- --&gt;

&lt;!-- # Facets --&gt;

&lt;!-- --- --&gt;

---

# Animations

- Are easy with **tmap** (section [9.3](http://geocompr.robinlovelace.net/adv-map.html#animated-maps) of geocompr)

&lt;img src="https://user-images.githubusercontent.com/1825120/38543030-5794b6f0-3c9b-11e8-9da9-10ec1f3ea726.gif" width="80%" /&gt;

---

# Interactive maps with mapview


```r
m = mapview::mapview(nz)
m@map
```

<div id="htmlwidget-d60f953ccb27b77ce409" style="width:504px;height:504px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-d60f953ccb27b77ce409">{"x":{"options":{"minZoom":1,"maxZoom":100,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",1,"CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter",2,"CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap",3,"OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",4,"Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenTopoMap",5,"OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[174.616638800656,174.562809050564,174.481748333157,174.338965900234,174.214573266902,174.128772750479,174.045997583891,174.095972133855,174.155368483074,174.181866683395,174.135350500256,174.040527550541,173.983675883808,173.86604691657,173.688098133553,173.365180583183,173.356613017331,173.054243634031,173.130559999733,173.168093182624,173.167447217184,173.081005749918,172.851222917828,172.653880649817,172.69995103369,172.793065450767,172.869035233581,173.014442316542,172.984791449998,173.025130983722,173.120204417268,173.199324916413,173.280772883247,173.214814899913,173.288398249192,173.340087699738,173.286914883417,173.429163483407,173.389709633848,173.43403079967,173.535566349955,173.562634800269,173.644032483283,173.701142200014,173.74008500064,173.841272884062,173.931277716701,173.963284550175,174.078539632729,174.079958382619,174.125462949978,174.28978491699,174.350169531639,174.339655300127,174.468392016881,174.474719383801,174.536753999552,174.50237205005,174.557601466643,174.555188500026,174.485563450384,174.42268665044,174.404830266529,174.500809283377,174.460144966703,174.510000500399,174.589780900475,174.616638800656],"lat":[-36.1175604656944,-36.1790001818576,-36.2282769990413,-36.3168297159807,-36.2587116651841,-36.1736123985495,-36.1701695492252,-36.2448879325642,-36.2760972318253,-36.3630358989103,-36.3920499160081,-36.3928830657082,-36.2337049987774,-36.0912001153456,-35.8924174488148,-35.5474016986193,-35.5228177325257,-35.1912381654594,-35.1789323319616,-35.1364273318609,-35.0363686485711,-34.892391948775,-34.6297133654355,-34.4780076493228,-34.4263823986052,-34.4539942818795,-34.4145187159542,-34.4241368989252,-34.527807331778,-34.6535190988746,-34.8166837662553,-34.8709688489326,-34.8925261163679,-34.9612557658601,-35.0132316323195,-34.9582312155642,-34.863498565206,-34.8251486151847,-34.9534963320373,-34.9859361488292,-34.9984530656404,-34.921567965642,-34.9661940820365,-34.9524767152288,-35.0372064825609,-34.9943093153067,-35.0472986489564,-35.1188625989141,-35.1161314992371,-35.2730977491976,-35.2940340323346,-35.275147999254,-35.3264187480412,-35.3768798995113,-35.4907537659847,-35.5563464652291,-35.5876817825918,-35.6408337993009,-35.7240167322097,-35.8608909991603,-35.7863742154656,-35.7848320989407,-35.8310155162791,-35.8410631820889,-35.9145349489216,-36.0304654486689,-36.0481898651512,-36.1175604656944]}]],[[{"lng":[175.291304133085,175.152091033439,175.141120333576,175.048242617196,174.990258082555,174.868951232796,174.815488049849,174.659628367495,174.538637882794,174.627048466479,174.690634167279,174.73950153409,174.857652450143,174.826874817006,174.744100215986,174.681552100084,174.583827667051,174.48303651745,174.468611433661,174.424401866458,174.273615083721,174.16870360025,174.187919333768,174.235835399823,174.312745950162,174.404776383887,174.43132198402,174.414885550516,174.25745998445,174.257569883856,174.373455166346,174.481748333157,174.562809050564,174.616638800656,174.657346033553,174.745751216322,174.818184083076,174.734791817454,174.723020317237,174.6928154505,174.740610167352,174.775982149355,174.735215883483,174.880847016882,174.95133831739,175.055796349565,175.093513100132,175.194032000506,175.28332898404,175.291304133085],"lat":[-37.0240384656099,-37.021558349011,-37.1756033823823,-37.1822711987194,-37.2165854987257,-37.2449865993298,-37.2286308819556,-37.2924320822976,-37.0766323992704,-37.0367340823466,-37.1366489991479,-37.1262254659295,-37.0510942821226,-37.012906115989,-36.9843338819435,-36.933814715128,-37.0073111154427,-37.0480030485092,-36.9540757984799,-36.8242195155666,-36.611343649651,-36.4944308491331,-36.4344940155889,-36.4280906159373,-36.5364925985429,-36.6242364990766,-36.5110054653017,-36.4036616152843,-36.3809034482098,-36.3259556814746,-36.319475365558,-36.2282769990413,-36.1790001818576,-36.1175604656944,-36.1775323821109,-36.2569215818705,-36.2852678653075,-36.4030681159148,-36.5128217493019,-36.5757347652714,-36.648003548461,-36.7735064489745,-36.8411249488101,-36.8523293320354,-36.8953845489361,-36.8826005984849,-36.9457113821992,-36.9343089320145,-36.9885057492402,-37.0240384656099]}],[{"lng":[175.397381334664,175.42270826654,175.48369956673,175.479485900625,175.5432121837,175.525421999774,175.437765849463,175.433490317009,175.350243184351,175.364852117959,175.326193733308,175.341795483261,175.397381334664],"lat":[-36.0497132984248,-36.1291887981071,-36.1921515491051,-36.2444036824782,-36.2952009824997,-36.3476168486318,-36.307523165454,-36.2724128487222,-36.2285364488672,-36.1822376159757,-36.1382729809521,-36.0685923484964,-36.0497132984248]}],[{"lng":[175.172594933364,175.14511235048,175.066499350382,175.038030716822,175.172594933364],"lat":[-36.738659148458,-36.8474120322297,-36.833736049202,-36.7957700656571,-36.738659148458]}]],[[{"lng":[175.940104000404,175.913492216935,175.832775867558,175.809667417205,175.833586717065,175.927714949317,175.905873816583,175.97718783329,175.940945834189,176.075603717482,176.076019150589,176.150334834187,176.232057866463,176.297547798202,176.390623467124,176.429143533873,176.505324767157,176.450980499877,176.255113766944,176.25838093416,176.257562950888,176.147549683454,176.172753900527,176.085669116788,175.989206866079,175.96436554996,175.885970716459,175.81256880052,175.669211766575,175.557854216472,175.634656366175,175.617972132813,175.682012417338,175.562633650262,175.579969833543,175.546438183897,175.574620149734,175.523386533046,175.632458999384,175.612185166049,175.480939533802,175.383212017291,175.317760016592,175.213231183619,175.10922668413,174.954390867085,174.937845033609,174.862896367393,174.791960217277,174.655191183282,174.615147466571,174.64557498284,174.634641616934,174.715704749268,174.712538232634,174.690774649571,174.777037133266,174.895569600305,174.874875616366,174.77780156729,174.792085916113,174.75679855049,174.843696184123,174.956284466653,174.951308116722,174.837134500703,174.768715216871,174.700024633059,174.659628367495,174.815488049849,174.868951232796,174.990258082555,175.048242617196,175.141120333576,175.152091033439,175.291304133085,175.294966566687,175.323006283065,175.3992043827,175.544902117386,175.514084716697,175.519742083219,175.491002617547,175.408398483484,175.490180517217,175.494676733872,175.429445151764,175.447073067326,175.405834634533,175.344544616922,175.328268300532,175.36819123307,175.520191916267,175.522613315882,175.583391316677,175.578198899777,175.646650566193,175.788850933098,175.708633783134,175.78130515032,175.856004517198,175.842233483927,175.888322383074,175.878370950751,175.940104000404],"lat":[-37.3732415484691,-37.4255867158573,-37.4716019822483,-37.5138131488217,-37.627487116407,-37.7760034318441,-37.8285516660311,-37.9136730318673,-37.929422498877,-38.0495643987294,-38.1214420984941,-38.2181863985788,-38.2390825817378,-38.2295556160189,-38.3230470158511,-38.3134151157849,-38.4022137983805,-38.5616572318279,-38.8081781823439,-38.8899908822005,-38.9478759655805,-39.0376736992173,-39.078485865698,-39.1294486159224,-39.1155480822463,-39.1798030158705,-39.2058951825543,-39.3003262155506,-39.2969341484887,-39.275998348557,-39.1583628823489,-39.0812491659204,-38.9797104992941,-38.9868296989252,-38.9106842487293,-38.8598730987102,-38.8163002487824,-38.7500919659138,-38.5917750662774,-38.4876116152668,-38.4788807492087,-38.5422959823113,-38.5560422660881,-38.6393990322249,-38.6245203657275,-38.6675035317342,-38.750158565732,-38.7745840657408,-38.7317766320812,-38.733282598971,-38.7066484484355,-38.456366532196,-38.3871955151089,-38.306503798789,-38.2005980653001,-38.1176242493072,-38.1325016484108,-38.0859713154502,-38.0485370825667,-38.0815316822903,-38.0072839655096,-37.8638128158854,-37.8039134651702,-37.7924118822994,-37.7515311826191,-37.7936627817976,-37.5608502990229,-37.4167737825715,-37.2924320822976,-37.2286308819556,-37.2449865993298,-37.2165854987257,-37.1822711987194,-37.1756033823823,-37.021558349011,-37.0240384656099,-37.1211146488442,-37.1906320155193,-37.2270412657254,-37.1573665486129,-37.0930035984758,-37.0341053984372,-36.9622664324621,-36.8575113993452,-36.8083106660792,-36.7619687485569,-36.7001410811232,-36.6600482654022,-36.5805631821948,-36.5530231161566,-36.4808005311893,-36.4685975814747,-36.540797347976,-36.5918639488091,-36.6272173984681,-36.6802999487664,-36.7363723657186,-36.7041192823774,-36.8325179654657,-36.8224126983042,-36.9228085825103,-36.9474531163237,-37.0391867654612,-37.2003710487584,-37.3732415484691]}]],[[{"lng":[178.085284050728,178.107554900656,177.986683351023,177.996621683506,178.073006950406,177.972291633859,177.860967450149,177.739984233557,177.692067683864,177.604788567261,177.499270867144,177.463687900819,177.236922317683,177.257394033283,177.122170799827,177.045979500377,176.991448066662,176.87866763316,176.766746733651,176.717283066468,176.695970650021,176.601167800205,176.520452884071,176.468164783255,176.382140266511,176.303565400194,176.25838093416,176.255113766944,176.450980499877,176.505324767157,176.429143533873,176.390623467124,176.297547798202,176.232057866463,176.150334834187,176.076019150589,176.075603717482,175.940945834189,175.97718783329,175.905873816583,175.927714949317,175.833586717065,175.809667417205,175.832775867558,175.913492216935,175.940104000404,175.963443900663,175.93480529982,175.975048966786,176.053118300075,176.186754767108,176.250032000857,176.419017433436,176.477600450903,176.601950900424,176.736143750078,176.931668933866,177.083869783406,177.160565467584,177.383685833914,177.487534484142,177.5467901337,177.619619200774,177.683952433749,177.727635733791,177.868536417845,177.958640534434,178.006622349832,178.085284050728],"lat":[-37.5423911644835,-37.5987159642156,-37.608757131627,-37.7602764981656,-37.763589697625,-37.8450054645489,-38.111656164856,-38.0420469653264,-38.1082775985621,-38.1866207651104,-38.218466748141,-38.3335362652484,-38.4263417984395,-38.5082771649267,-38.5839209323106,-38.6208022318753,-38.6936945821222,-38.6671346482785,-38.6893096821462,-38.7245242984985,-38.821591765226,-38.8255591320103,-38.7968662986011,-38.9415194650999,-38.9887032818883,-38.9017194489979,-38.8899908822005,-38.8081781823439,-38.5616572318279,-38.4022137983805,-38.3134151157849,-38.3230470158511,-38.2295556160189,-38.2390825817378,-38.2181863985788,-38.1214420984941,-38.0495643987294,-37.929422498877,-37.9136730318673,-37.8285516660311,-37.7760034318441,-37.627487116407,-37.5138131488217,-37.4716019822483,-37.4255867158573,-37.3732415484691,-37.4333808158096,-37.5368533652548,-37.6239334651892,-37.6595265655595,-37.6347900163663,-37.6800395986664,-37.7484934656492,-37.7541410490401,-37.8295142658466,-37.8795955820795,-37.9168966990325,-37.97881408172,-37.9898454653388,-37.9836964652483,-37.9495595650015,-37.907579681643,-37.8107282986553,-37.7601537146058,-37.6801879481397,-37.6533825650691,-37.6053283313811,-37.5531278650569,-37.5423911644835]}]],[[{"lng":[177.898992867322,177.834796917381,177.799025000975,177.660163933681,177.660490067302,177.597522800508,177.49421208424,177.447906750195,177.353425167645,177.307560650033,177.122170799827,177.257394033283,177.236922317683,177.463687900819,177.499270867144,177.604788567261,177.692067683864,177.739984233557,177.860967450149,177.972291633859,178.073006950406,177.996621683506,177.986683351023,178.107554900656,178.085284050728,178.174634083746,178.276301851602,178.363710601162,178.482593484053,178.550373600413,178.415858017631,178.391299368031,178.337261951072,178.373593883376,178.321955168218,178.338370117511,178.312409501413,178.344519151294,178.281772317114,178.293040667099,178.198843133985,178.050040402505,177.972729617199,177.911783384436,177.898992867322],"lat":[-38.9718330650175,-38.9527794145103,-38.894390298498,-38.9047009151453,-38.8489419148341,-38.8070414982858,-38.7779742816836,-38.635943881496,-38.6245578651476,-38.6597041986934,-38.5839209323106,-38.5082771649267,-38.4263417984395,-38.3335362652484,-38.218466748141,-38.1866207651104,-38.1082775985621,-38.0420469653264,-38.111656164856,-37.8450054645489,-37.763589697625,-37.7602764981656,-37.608757131627,-37.5987159642156,-37.5423911644835,-37.5346582976607,-37.5544868643062,-37.6310041970988,-37.6410965135085,-37.6920842475177,-37.858043914603,-37.96139966432,-38.0095467644941,-38.0944882308455,-38.1221914143475,-38.1917070807555,-38.2415486140831,-38.4184646310016,-38.4721755140647,-38.5269283310691,-38.6055091138778,-38.7020828308264,-38.6812606814275,-38.8279248650128,-38.9718330650175]}]],[[{"lng":[177.898992867322,177.901799650219,178.001674400697,177.924318566661,177.906174350275,177.850842016855,177.839268633525,177.870901817579,177.755965216565,177.636631149881,177.421363584153,177.259161701129,177.046117517326,176.989527483471,176.919394050427,176.876375366274,176.92417755026,176.922247883049,176.966353650084,177.075499034874,177.011022417483,177.005106232773,176.932128366633,176.888223216891,176.868997500466,176.794396933421,176.687031283282,176.622569049879,176.44329526638,176.359488317331,176.378605866561,176.323214066837,176.204970833785,176.136627349808,176.093831400639,176.106847067352,176.176852599749,176.195937933827,176.142726417603,176.183756817499,176.136827417622,176.111859467522,176.121760383432,176.080882450312,176.115201750033,176.085669116788,176.172753900527,176.147549683454,176.257562950888,176.25838093416,176.303565400194,176.382140266511,176.468164783255,176.520452884071,176.601167800205,176.695970650021,176.717283066468,176.766746733651,176.87866763316,176.991448066662,177.045979500377,177.122170799827,177.307560650033,177.353425167645,177.447906750195,177.49421208424,177.597522800508,177.660490067302,177.660163933681,177.799025000975,177.834796917381,177.898992867322],"lat":[-38.9718330650175,-39.072958914579,-39.1049364815166,-39.170128764679,-39.2262764638146,-39.23344979759,-39.1523278972202,-39.0876976317007,-39.0586759148302,-39.0504614651715,-39.0626328980216,-39.1006631818748,-39.1939367488147,-39.2940027827682,-39.340023081939,-39.4226607984435,-39.4759893479044,-39.5495836482895,-39.6235120815144,-39.6732594143485,-39.7427146820441,-39.8359419153985,-39.9352899653405,-40.0255260150188,-40.1313829654286,-40.2053349986504,-40.2563932317111,-40.428016515103,-40.4073888320159,-40.1971025155129,-40.158140715708,-40.0937170152624,-40.0189951157944,-40.0285781328905,-39.9955025823032,-39.9172052487456,-39.7440490985706,-39.6635709656431,-39.5846827821663,-39.5389751321452,-39.4752775323353,-39.3849908324807,-39.3263642658798,-39.259163698437,-39.2176892155225,-39.1294486159224,-39.078485865698,-39.0376736992173,-38.9478759655805,-38.8899908822005,-38.9017194489979,-38.9887032818883,-38.9415194650999,-38.7968662986011,-38.8255591320103,-38.821591765226,-38.7245242984985,-38.6893096821462,-38.6671346482785,-38.6936945821222,-38.6208022318753,-38.5839209323106,-38.6597041986934,-38.6245578651476,-38.635943881496,-38.7779742816836,-38.8070414982858,-38.8489419148341,-38.9047009151453,-38.894390298498,-38.9527794145103,-38.9718330650175]}]],[[{"lng":[174.615147466571,174.655191183282,174.791960217277,174.862896367393,174.819869750297,174.798771383129,174.82803073341,174.764415417466,174.788411450134,174.675169549981,174.755642432479,174.747802983227,174.891668949943,174.871353583229,174.928495867377,174.967386967073,174.972628816641,174.930618333552,174.784081849931,174.716569950035,174.558874867369,174.444514817259,174.352709617041,174.201535516873,174.076819100748,173.910845583182,173.794988949217,173.75158500083,173.794817016681,173.909613299173,174.088957305084,174.200815833298,174.390964834124,174.559947483204,174.615147466571],"lat":[-38.7066484484355,-38.733282598971,-38.7317766320812,-38.7745840657408,-38.7875171157049,-38.8652667990647,-38.9237043654107,-39.0047909490927,-39.0678331821263,-39.1298299484337,-39.2336436325713,-39.2757990153803,-39.3582403656344,-39.4010654656499,-39.476150315266,-39.4862796823447,-39.6531460991801,-39.7244787989717,-39.8579774488477,-39.8672062158442,-39.8174444655184,-39.7506608655116,-39.6590780823632,-39.5880837822252,-39.5773399657603,-39.5148036322919,-39.4150641318764,-39.2803068989318,-39.1924945663846,-39.1211085989681,-39.05093017146,-38.9883909492587,-38.9888580820862,-38.8559135825966,-38.7066484484355]}]],[[{"lng":[176.085669116788,176.115201750033,176.080882450312,176.121760383432,176.111859467522,176.136827417622,176.183756817499,176.142726417603,176.195937933827,176.176852599749,176.106847067352,176.093831400639,176.136627349808,176.204970833785,176.323214066837,176.378605866561,176.359488317331,176.44329526638,176.622569049879,176.620793584036,176.493457017505,176.332762533486,176.211253483369,176.0823341834,176.022449299869,175.871636834195,175.764739183997,175.77010965014,175.690650115948,175.653222466794,175.473443566666,175.439643550552,175.371593716648,175.266658932695,175.136486700712,175.190707066476,175.227057750243,175.223560650608,175.198135366129,175.162540683897,175.045463016742,174.927877449905,174.784081849931,174.930618333552,174.972628816641,174.967386967073,174.928495867377,174.871353583229,174.891668949943,174.747802983227,174.755642432479,174.675169549981,174.788411450134,174.764415417466,174.82803073341,174.798771383129,174.819869750297,174.862896367393,174.937845033609,174.954390867085,175.10922668413,175.213231183619,175.317760016592,175.383212017291,175.480939533802,175.612185166049,175.632458999384,175.523386533046,175.574620149734,175.546438183897,175.579969833543,175.562633650262,175.682012417338,175.617972132813,175.634656366175,175.557854216472,175.669211766575,175.81256880052,175.885970716459,175.96436554996,175.989206866079,176.085669116788],"lat":[-39.1294486159224,-39.2176892155225,-39.259163698437,-39.3263642658798,-39.3849908324807,-39.4752775323353,-39.5389751321452,-39.5846827821663,-39.6635709656431,-39.7440490985706,-39.9172052487456,-39.9955025823032,-40.0285781328905,-40.0189951157944,-40.0937170152624,-40.158140715708,-40.1971025155129,-40.4073888320159,-40.428016515103,-40.4917772319467,-40.5305003317111,-40.697900798384,-40.6592102818353,-40.7081527150616,-40.7114886658847,-40.7779047323733,-40.7680905657414,-40.6988883988743,-40.69656233202,-40.7424894817401,-40.6933970987875,-40.7441521317704,-40.7268607820595,-40.7686105321399,-40.7003334988645,-40.5669227151056,-40.3980753824259,-40.2930346153791,-40.176542231835,-40.1071686324608,-39.9854570651791,-39.8993730483986,-39.8579774488477,-39.7244787989717,-39.6531460991801,-39.4862796823447,-39.476150315266,-39.4010654656499,-39.3582403656344,-39.2757990153803,-39.2336436325713,-39.1298299484337,-39.0678331821263,-39.0047909490927,-38.9237043654107,-38.8652667990647,-38.7875171157049,-38.7745840657408,-38.750158565732,-38.6675035317342,-38.6245203657275,-38.6393990322249,-38.5560422660881,-38.5422959823113,-38.4788807492087,-38.4876116152668,-38.5917750662774,-38.7500919659138,-38.8163002487824,-38.8598730987102,-38.9106842487293,-38.9868296989252,-38.9797104992941,-39.0812491659204,-39.1583628823489,-39.275998348557,-39.2969341484887,-39.3003262155506,-39.2058951825543,-39.1798030158705,-39.1155480822463,-39.1294486159224]}]],[[{"lng":[176.332762533486,176.26722840018,176.224487017581,176.154899234063,176.10692563345,176.062479416918,176.003310849803,175.961835883779,175.899294816757,175.811865650044,175.675583900734,175.585185949959,175.533100033117,175.433381416302,175.325406533484,175.236423100173,175.195284183578,175.216735033403,175.043268483566,174.924173882771,174.847847867082,174.912076183578,174.844356367019,174.785921437228,174.839045832862,174.705109599961,174.66078746668,174.623012999722,174.711288199763,174.794672150245,174.867167799271,174.846312016586,174.938811199179,174.989772533759,175.035492733743,175.136486700712,175.266658932695,175.371593716648,175.439643550552,175.473443566666,175.653222466794,175.690650115948,175.77010965014,175.764739183997,175.871636834195,176.022449299869,176.0823341834,176.211253483369,176.332762533486],"lat":[-40.697900798384,-40.7848635990564,-40.9064747158409,-40.9481505485552,-41.0152208983266,-41.1310157488453,-41.1717069150941,-41.2447748991174,-41.263295698964,-41.3596269983552,-41.4137952321091,-41.4873728317359,-41.4965452324955,-41.5688357159601,-41.6059589652283,-41.6051656491046,-41.52380263175,-41.4315767324678,-41.3733172986271,-41.4347028657533,-41.3594841318538,-41.2597096989556,-41.2288581487979,-41.2651837984018,-41.3252582653187,-41.3571104657745,-41.3403752321019,-41.2603256324104,-41.2199340163287,-41.1246902987902,-41.0867387654512,-41.0499113650997,-41.0003014656217,-40.8786943159492,-40.8516626987801,-40.7003334988645,-40.7686105321399,-40.7268607820595,-40.7441521317704,-40.6933970987875,-40.7424894817401,-40.69656233202,-40.6988883988743,-40.7680905657414,-40.7779047323733,-40.7114886658847,-40.7081527150616,-40.6592102818353,-40.697900798384]}]],[[{"lng":[172.479030949819,172.444256900204,172.348260516017,172.235513800302,172.1330007499,172.094375383646,171.974953333456,171.915639166648,171.841774433461,171.763848766853,171.746369750712,171.69066966728,171.44922653414,171.411630450039,171.316264849941,171.237669015979,171.197689267427,171.079330766508,170.993271149153,170.937214367317,170.830348166594,170.70569891615,170.592312017226,170.528889117364,170.395291850712,170.32286143405,170.23842121714,170.098131417276,170.091407749956,169.965530866422,169.90003478334,169.699336634174,169.592780550647,169.591375933139,169.37295708232,169.275178699696,169.188798133344,169.147102432497,168.975078451222,168.963356499608,168.849166000645,168.836083533033,168.728392349424,168.625502800125,168.460041532958,168.334527917476,168.407363599041,168.349075433281,168.347349199204,168.224958950513,168.131928965928,168.052080299808,168.245224000369,168.327532100509,168.386086599287,168.512572866295,168.59603308294,168.709528882891,168.815458849998,168.888444333017,168.969334415799,169.209384000748,169.426815166877,169.591670650551,169.690794066995,169.793601633191,169.981233500258,170.050894783885,170.26610145036,170.257309000666,170.34165461676,170.420541400347,170.524388600502,170.720963766414,170.867846066505,170.947971800697,171.051014333038,171.167346766778,171.218172099769,171.304561750154,171.321142133862,171.417931516559,171.455980199127,171.462321733036,171.587717983286,171.670754701712,171.828431383484,171.882088466121,171.987652299441,172.063382449494,172.092597800296,172.111628817585,172.094501582949,172.133988150577,172.217804650849,172.229036100221,172.370078216958,172.310335033614,172.493938299216,172.485968450507,172.618004983595,172.657937583202,172.600312034113,172.584361567504,172.46311268413,172.418018282578,172.34245996745,172.320665484129,172.238130649319,172.247078967484,172.129322299744,172.115730567145,172.052126816993,172.135203666157,172.206730749948,172.26099479982,172.331950216583,172.335875833233,172.369593532568,172.479030949819],"lat":[-42.2770294321582,-42.3659640989275,-42.3913898484238,-42.4567272653772,-42.555206165474,-42.620447649208,-42.6389925153503,-42.6817304486731,-42.7745563155916,-42.7917224155595,-42.8740806990873,-42.9008274318025,-42.9092283825771,-42.9507592157018,-42.9474959822438,-43.0025114822992,-43.0742574827824,-43.1023006491937,-43.2153140822537,-43.2040572816997,-43.2835111323787,-43.3207865154396,-43.4340141656842,-43.4103522157946,-43.4980505991007,-43.4903492991268,-43.5138270152105,-43.5954793823334,-43.6603731658345,-43.7917623155727,-43.8129979651981,-43.9635462820872,-43.9580761652086,-44.0125360157759,-44.1169906655865,-44.0985809991384,-44.1105468981571,-44.0802167647143,-44.144029482678,-44.1999363316809,-44.2466723482797,-44.3399177487696,-44.4194781156347,-44.4339354651062,-44.4953348145868,-44.4967794311922,-44.3751147812403,-44.3304823982331,-44.2842383150997,-44.2568242481732,-44.2811937805761,-44.2586477644386,-44.1580564148823,-44.0494656149832,-44.0035227647632,-44.0018953485984,-43.972544931433,-43.9942465484544,-43.967407482296,-43.9053743487473,-43.8784611487209,-43.7192993989329,-43.6253148319105,-43.5990183985556,-43.5430910156157,-43.4215250491817,-43.3578198485717,-43.2918989992297,-43.1725636148878,-43.1188153484637,-43.0966792490246,-43.0361614319467,-43.0173943492177,-42.9301012989599,-42.8228048650756,-42.7232656989913,-42.6506883156858,-42.507808999035,-42.3810197652936,-42.26721416581,-42.1532471989487,-41.9177566319483,-41.8824885820004,-41.7497772323494,-41.7299331823789,-41.7398889748909,-41.6470442490746,-41.6006758819097,-41.4457266652364,-41.3840702151397,-41.2827791492465,-41.0257784653088,-40.9162500821251,-40.8506217819384,-40.7745427659852,-40.8558806654945,-40.9707524662312,-41.0135581153669,-41.0245241992829,-41.0542427317871,-41.1598956484784,-41.2391689986086,-41.301833231725,-41.3761944990331,-41.4043775655815,-41.4716592483862,-41.5131613488661,-41.6102873658304,-41.6395180990257,-41.6842177157717,-41.7140016320066,-41.8684047987292,-41.9451821320404,-42.1040439824411,-42.0983147822779,-42.1483124824925,-42.1506392819926,-42.2342079650967,-42.2806025158761,-42.2770294321582]}]],[[{"lng":[174.048786900106,173.966599600681,173.892544684064,173.697996616623,173.671647083024,173.594467415865,173.509134350058,173.479398800221,173.368425849937,173.241651783235,173.14498353365,173.080542450878,172.816906899328,172.73369503355,172.704087800548,172.71511108423,172.776007199763,173.040053516148,173.102133650692,173.130149783874,173.100509666792,172.997729132882,172.836626966534,172.728520416444,172.587602799177,172.31661868302,172.028047117075,171.614830016684,171.439070166985,171.333436083013,171.244871200256,171.258240632397,171.195791149222,171.159184499413,171.167954350424,171.144153632672,170.882433150378,170.658825416631,170.636873433878,170.542436216334,170.447188600346,170.397211283579,170.349440716735,170.373258400944,170.319353066232,170.242072667457,170.094098767271,169.996618083497,169.944216317567,169.836191183419,169.757151799335,169.64421074906,169.633685649884,169.545884367477,169.57710081663,169.571069933865,169.717037416418,169.699336634174,169.90003478334,169.965530866422,170.091407749956,170.098131417276,170.23842121714,170.32286143405,170.395291850712,170.528889117364,170.592312017226,170.70569891615,170.830348166594,170.937214367317,170.993271149153,171.079330766508,171.197689267427,171.237669015979,171.316264849941,171.411630450039,171.44922653414,171.69066966728,171.746369750712,171.763848766853,171.841774433461,171.915639166648,171.974953333456,172.094375383646,172.1330007499,172.235513800302,172.348260516017,172.444256900204,172.479030949819,172.614713433524,172.639183050117,172.721472999322,172.7216385824,172.823290099099,172.84243633332,172.914144833248,172.94139345023,172.992906316788,173.035789000756,173.189895532864,173.24452471748,173.312201366903,173.464463350147,173.499107499943,173.720210166329,173.744379950814,173.817253667021,173.955504883873,174.048786900106],"lat":[-41.9681092153221,-42.0447000152795,-42.1892206151104,-42.3510559318127,-42.4129525817371,-42.4284450158567,-42.5056332995687,-42.5927161823835,-42.7988198817693,-42.9528653651932,-42.9864308657389,-43.0507309154355,-43.1332584490511,-43.2550360152331,-43.3903552157173,-43.5479150821427,-43.5827193318566,-43.655200115819,-43.695674332442,-43.7627759990122,-43.8318133819422,-43.887374181769,-43.8897602820484,-43.827672948886,-43.8332652153015,-43.8670884155677,-43.9583162989337,-44.1318285159338,-44.223302165222,-44.29519071562,-44.3817173984546,-44.4457059821591,-44.5267523658159,-44.6278346989838,-44.8761730654825,-44.9403990317159,-44.8910093988807,-44.9092402825927,-44.9513015826756,-44.9850467662699,-45.0659566656639,-45.0809043658361,-45.0216976989144,-44.9527760150862,-44.9030489818812,-44.9307172490846,-44.9400199325103,-44.8215735824524,-44.6539842158713,-44.6688994151491,-44.6121328150526,-44.5858154987675,-44.4624052989399,-44.4226623986567,-44.3456657822034,-44.1772291490345,-44.0382773150381,-43.9635462820872,-43.8129979651981,-43.7917623155727,-43.6603731658345,-43.5954793823334,-43.5138270152105,-43.4903492991268,-43.4980505991007,-43.4103522157946,-43.4340141656842,-43.3207865154396,-43.2835111323787,-43.2040572816997,-43.2153140822537,-43.1023006491937,-43.0742574827824,-43.0025114822992,-42.9474959822438,-42.9507592157018,-42.9092283825771,-42.9008274318025,-42.8740806990873,-42.7917224155595,-42.7745563155916,-42.6817304486731,-42.6389925153503,-42.620447649208,-42.555206165474,-42.4567272653772,-42.3913898484238,-42.3659640989275,-42.2770294321582,-42.195462648942,-42.1007946820051,-42.1034917984715,-42.1586981829407,-42.2047070158123,-42.2891840655117,-42.3086088991359,-42.3778250325749,-42.4038495329915,-42.483470531931,-42.4105463985623,-42.3031041152154,-42.2503815987574,-42.1956736989625,-42.0787366824486,-41.9607712153085,-41.9073832655696,-41.9329969824132,-41.9126783161685,-41.9681092153221]}]],[[{"lng":[169.699336634174,169.717037416418,169.571069933865,169.57710081663,169.545884367477,169.633685649884,169.64421074906,169.757151799335,169.836191183419,169.944216317567,169.996618083497,170.094098767271,170.242072667457,170.319353066232,170.373258400944,170.349440716735,170.397211283579,170.447188600346,170.542436216334,170.636873433878,170.658825416631,170.882433150378,171.144153632672,171.100528099082,170.973751149775,170.904456867088,170.831473232453,170.831145883379,170.75579789982,170.725243549953,170.653058832419,170.600894433298,170.658593699998,170.663784716406,170.511765316615,170.297526650458,170.196885316546,170.168560666665,169.923941867019,169.79808831661,169.797051965838,169.587586633505,169.47711816663,169.404843300523,169.279166266453,169.200940883195,169.250660233525,169.172959832967,169.195997516664,169.134143867521,169.190826583093,169.198060700805,169.159619899699,169.153328134266,169.067252783316,169.091515616612,169.005199499322,168.993372050566,169.129045084135,169.140231617244,169.211048582457,169.099293033043,169.065469000311,168.959565366312,168.886900132632,168.782457032387,168.75163494987,168.69221520076,168.674105117547,168.539401383191,168.323294050019,168.300759133521,168.217006499085,168.284206182761,168.292267949593,168.133993850181,168.117214416596,168.191001933458,168.172333383406,168.234509800005,168.334527917476,168.460041532958,168.625502800125,168.728392349424,168.836083533033,168.849166000645,168.963356499608,168.975078451222,169.147102432497,169.188798133344,169.275178699696,169.37295708232,169.591375933139,169.592780550647,169.699336634174],"lat":[-43.9635462820872,-44.0382773150381,-44.1772291490345,-44.3456657822034,-44.4226623986567,-44.4624052989399,-44.5858154987675,-44.6121328150526,-44.6688994151491,-44.6539842158713,-44.8215735824524,-44.9400199325103,-44.9307172490846,-44.9030489818812,-44.9527760150862,-45.0216976989144,-45.0809043658361,-45.0659566656639,-44.9850467662699,-44.9513015826756,-44.9092402825927,-44.8910093988807,-44.9403990317159,-45.0030083658772,-45.0991354486887,-45.1744155159745,-45.3055600319025,-45.47351151537,-45.533487849239,-45.5959489158091,-45.6310545490063,-45.7107696823958,-45.7588499491829,-45.90350873208,-45.9091708325265,-45.962393299201,-46.0625319323994,-46.1545419155222,-46.2983543328216,-46.3546976154903,-46.4513536983663,-46.5657448483276,-46.561308415738,-46.6123262484312,-46.6224137656559,-46.5607098317204,-46.5143265821905,-46.4861186652218,-46.4044065815377,-46.3754392319744,-46.3264038982326,-46.2126295481465,-46.17563714884,-46.0487447149754,-45.9804276152038,-45.8825561153394,-45.8634921986908,-45.728538415532,-45.5203341814875,-45.4652520817811,-45.4167719981801,-45.3199457483018,-45.2696098987878,-45.3591220818036,-45.4628204647209,-45.4370390819812,-45.3675663482257,-45.3396697486266,-45.243071748204,-45.3093267152652,-45.327543165004,-45.2246531150086,-45.1445409478926,-45.1061745316038,-45.0438246313575,-44.9414410647068,-44.8714499475246,-44.7667900979116,-44.7045591815038,-44.543195697871,-44.4967794311922,-44.4953348145868,-44.4339354651062,-44.4194781156347,-44.3399177487696,-44.2466723482797,-44.1999363316809,-44.144029482678,-44.0802167647143,-44.1105468981571,-44.0985809991384,-44.1169906655865,-44.0125360157759,-43.9580761652086,-43.9635462820872]}]],[[{"lng":[168.334527917476,168.234509800005,168.172333383406,168.191001933458,168.117214416596,168.133993850181,168.292267949593,168.284206182761,168.217006499085,168.300759133521,168.323294050019,168.539401383191,168.674105117547,168.69221520076,168.75163494987,168.782457032387,168.886900132632,168.959565366312,169.065469000311,169.099293033043,169.211048582457,169.140231617244,169.129045084135,168.993372050566,169.005199499322,169.091515616612,169.067252783316,169.153328134266,169.159619899699,169.198060700805,169.190826583093,169.134143867521,169.195997516664,169.172959832967,169.250660233525,169.200940883195,169.279166266453,169.220365916036,169.112977633974,169.005877783165,168.847240616748,168.793966399727,168.602963450817,168.515573883457,168.352956367785,168.265940500354,168.263609712926,168.190226400186,168.064940999915,168.015834933966,167.93185776713,167.783985416635,167.697388534619,167.712351200166,167.611463133841,167.533283266975,167.403100267612,167.360417901081,167.21721350111,167.105668635801,166.852483269489,166.778670303253,166.657467519732,166.618782638105,166.68276642128,166.698540019365,166.615138537561,166.611146487314,166.555778437685,166.449630289541,166.426302922672,166.450324487655,166.518401055545,166.622173086985,166.804038752399,166.730721587317,166.751807818911,166.731030037295,166.671602286539,166.684135137044,166.844406784828,166.908979302292,167.007590901768,166.967797184775,167.002267434006,167.271321767837,167.500637450702,167.571723434454,167.751370433439,167.817211300363,167.827906550695,167.872684933483,167.973286216925,168.008558300361,168.097524283348,168.052080299808,168.131928965928,168.224958950513,168.347349199204,168.349075433281,168.407363599041,168.334527917476],"lat":[-44.4967794311922,-44.543195697871,-44.7045591815038,-44.7667900979116,-44.8714499475246,-44.9414410647068,-45.0438246313575,-45.1061745316038,-45.1445409478926,-45.2246531150086,-45.327543165004,-45.3093267152652,-45.243071748204,-45.3396697486266,-45.3675663482257,-45.4370390819812,-45.4628204647209,-45.3591220818036,-45.2696098987878,-45.3199457483018,-45.4167719981801,-45.4652520817811,-45.5203341814875,-45.728538415532,-45.8634921986908,-45.8825561153394,-45.9804276152038,-46.0487447149754,-46.17563714884,-46.2126295481465,-46.3264038982326,-46.3754392319744,-46.4044065815377,-46.4861186652218,-46.5143265821905,-46.5607098317204,-46.6224137656559,-46.6562230986616,-46.6445697986357,-46.6743386318507,-46.6586199315282,-46.5811262486453,-46.5519047482019,-46.5742984484888,-46.5362781974234,-46.5559335307158,-46.4953184320733,-46.385362914707,-46.3392979643704,-46.3838269807011,-46.3581014975032,-46.3890891144006,-46.3079614640087,-46.2576959475114,-46.1914227630124,-46.1624094634519,-46.1520754130151,-46.2369483964523,-46.262506462663,-46.2536611281298,-46.2084794771535,-46.2220721771329,-46.2022869430188,-46.1487916597835,-46.115505476528,-46.0582340934535,-46.0600605765193,-45.9997223432151,-45.974646442488,-45.9949010423682,-45.9044508916113,-45.8189640757832,-45.7943900094084,-45.7910534099089,-45.7598318109267,-45.7281351108185,-45.6676932439764,-45.5947802611119,-45.5749929265233,-45.51327281029,-45.2758819109303,-45.3074377113066,-45.3141696616934,-45.193701078927,-45.125554212344,-44.8704800963249,-44.7480578968815,-44.6858730799547,-44.5806611469132,-44.5991209972222,-44.5075593471068,-44.4342743641889,-44.3866309804165,-44.325056897274,-44.327164297602,-44.2586477644386,-44.2811937805761,-44.2568242481732,-44.2842383150997,-44.3304823982331,-44.3751147812403,-44.4967794311922]}],[{"lng":[167.869696717385,167.976547566978,168.001210732732,168.141792199565,168.141009318344,168.031908184531,167.978834600349,168.150523284284,168.21466859946,168.156390867238,167.954351351045,167.825699752283,167.710747199939,167.636122350701,167.64603149998,167.466622085851,167.466427318386,167.575995201712,167.579121551345,167.64975053312,167.694039967428,167.759027316278,167.756471367387,167.704121801107,167.754640633164,167.869696717385],"lat":[-46.6842310141065,-46.7237613964055,-46.7857626630967,-46.8618585308326,-46.9094082969645,-46.8968874803793,-46.928878231052,-46.9664681157901,-46.9944344818021,-47.104143514139,-47.1292745625223,-47.1913799811742,-47.1604565135486,-47.2102895300992,-47.2637216293728,-47.282852412478,-47.2165166290815,-47.1662433127973,-47.0853388966891,-47.036465245957,-46.9670829967513,-46.937085179398,-46.8609822627029,-46.7544420136327,-46.6946847136966,-46.6842310141065]}],[{"lng":[166.678832287015,166.716482704067,166.723640187457,166.684653836759,166.588378970674,166.53680382096,166.678832287015],"lat":[-45.6003755937766,-45.6245835270815,-45.6992354435032,-45.7481735767543,-45.7207469599612,-45.6343713925194,-45.6003755937766]}],[{"lng":[166.962425851921,166.949393052829,166.987792335244,166.947416384981,166.868999985619,166.962425851921],"lat":[-45.1477982781796,-45.2031774947468,-45.2585408452026,-45.2941630613068,-45.2405394780509,-45.1477982781796]}]],[[{"lng":[173.198887399729,173.297443983366,173.250831384127,173.304149350489,173.168700533592,173.151614666983,173.086652616993,173.003789650797,172.926235200656,172.847570550194,172.86109313253,172.735298849099,172.721472999322,172.639183050117,172.614713433524,172.479030949819,172.369593532568,172.335875833233,172.331950216583,172.26099479982,172.206730749948,172.135203666157,172.052126816993,172.115730567145,172.129322299744,172.247078967484,172.238130649319,172.320665484129,172.34245996745,172.418018282578,172.46311268413,172.584361567504,172.600312034113,172.657937583202,172.618004983595,172.485968450507,172.493938299216,172.310335033614,172.370078216958,172.229036100221,172.217804650849,172.292207984059,172.447285383514,172.60562558292,172.642595651343,172.728820134899,172.688014218755,172.692504033943,172.798009667228,172.886338016923,172.990330217499,173.063517816826,173.012366349789,173.033520217139,173.009530717519,173.06578501716,173.104255083169,173.198887399729],"lat":[-41.3306196988396,-41.3931415153442,-41.4665801156195,-41.5060320826617,-41.5311546985939,-41.5854709822417,-41.6249252324299,-41.7248032660052,-41.7577336152146,-41.8742874654083,-41.9224629652308,-42.0578953153641,-42.1034917984715,-42.1007946820051,-42.195462648942,-42.2770294321582,-42.2806025158761,-42.2342079650967,-42.1506392819926,-42.1483124824925,-42.0983147822779,-42.1040439824411,-41.9451821320404,-41.8684047987292,-41.7140016320066,-41.6842177157717,-41.6395180990257,-41.6102873658304,-41.5131613488661,-41.4716592483862,-41.4043775655815,-41.3761944990331,-41.301833231725,-41.2391689986086,-41.1598956484784,-41.0542427317871,-41.0245241992829,-41.0135581153669,-40.9707524662312,-40.8558806654945,-40.7745427659852,-40.747343831708,-40.6295302324912,-40.564454298989,-40.5081192325489,-40.529082264848,-40.5827790480611,-40.7278831992876,-40.8162795654575,-40.8323796317619,-40.781190265415,-40.9057494648018,-40.9921395156489,-41.0887589489451,-41.1437780986264,-41.1838260989464,-41.2901597319745,-41.3306196988396]}]],[[{"lng":[173.297443983366,173.198887399729,173.221776466012,173.310618882688,173.32361723313,173.412776467452,173.461631133591,173.593891449768,173.568365816496,173.523007850712,173.415419299657,173.40678916666,173.297443983366],"lat":[-41.3931415153442,-41.3306196988396,-41.2930118990714,-41.2507582154182,-41.2037450156555,-41.1494512154787,-41.1668533153892,-41.051119932096,-41.1897309652259,-41.1979918658125,-41.2891416985682,-41.3309583492389,-41.3931415153442]}]],[[{"lng":[174.048786900106,173.955504883873,173.817253667021,173.744379950814,173.720210166329,173.499107499943,173.464463350147,173.312201366903,173.24452471748,173.189895532864,173.035789000756,172.992906316788,172.94139345023,172.914144833248,172.84243633332,172.823290099099,172.7216385824,172.721472999322,172.735298849099,172.86109313253,172.847570550194,172.926235200656,173.003789650797,173.086652616993,173.151614666983,173.168700533592,173.304149350489,173.250831384127,173.297443983366,173.40678916666,173.415419299657,173.523007850712,173.568365816496,173.593891449768,173.673303050289,173.802376834404,173.85077169915,173.868127116147,173.93680894915,173.993088400438,174.079004183599,174.17580193353,174.219448550258,174.12449421688,174.133062266944,174.048447900196,174.033535683903,174.072046116608,174.150420350879,174.15696061672,174.198299267036,174.275035250512,174.196758333519,174.048786900106],"lat":[-41.9681092153221,-41.9126783161685,-41.9329969824132,-41.9073832655696,-41.9607712153085,-42.0787366824486,-42.1956736989625,-42.2503815987574,-42.3031041152154,-42.4105463985623,-42.483470531931,-42.4038495329915,-42.3778250325749,-42.3086088991359,-42.2891840655117,-42.2047070158123,-42.1586981829407,-42.1034917984715,-42.0578953153641,-41.9224629652308,-41.8742874654083,-41.7577336152146,-41.7248032660052,-41.6249252324299,-41.5854709822417,-41.5311546985939,-41.5060320826617,-41.4665801156195,-41.3931415153442,-41.3309583492389,-41.2891416985682,-41.1979918658125,-41.1897309652259,-41.051119932096,-41.0342675980534,-40.9722475313568,-41.0223203821596,-41.1442067658255,-41.0834601816984,-41.102108382502,-41.0162762153569,-40.9990567817746,-41.071342881889,-41.2362538657532,-41.2853295652496,-41.3931097318187,-41.4763469330072,-41.5239591986238,-41.5594337658122,-41.647669715474,-41.7232352491401,-41.742887365918,-41.8356043158789,-41.9681092153221]}],[{"lng":[173.956358883868,173.960139751383,173.905318948269,173.813983967132,173.772206384171,173.805729534265,173.93662750116,173.956358883868],"lat":[-40.6928282316529,-40.7644749486182,-40.8572309989367,-40.9304674322265,-40.8619594315769,-40.8027343155053,-40.7475060655163,-40.6928282316529]}]]],null,"nz",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6,"smoothFactor":1,"noClip":false},["<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>1&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Northland&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>12500.5611491&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>175500&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>23400&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.942453228842534&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>2&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Auckland&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>4941.5725565&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>1657200&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>29600&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.944285802583596&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>3&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Waikato&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>23900.0363831&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>460100&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>27900&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.952050024664133&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>4&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Bay of Plenty&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>12071.1446886&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>299900&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>26200&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.928039058955691&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>5&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Gisborne&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>8385.8266186&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>48500&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>24400&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.934973404255319&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>6&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Hawke's Bay&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>14137.5244406&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>164000&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>26100&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.923837520042758&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>7&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Taranaki&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>7254.4804331&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>118000&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>29100&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.956936261381896&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>8&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Manawatu-Wanganui&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>22220.6083872&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>234500&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>25000&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.938773377912444&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>9&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Wellington&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>North&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>8048.5527716&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>513900&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>32700&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.93355240486388&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#0000B333&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>10&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>West Coast&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>23245.45588&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>32400&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>26900&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>1.01390716030821&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>11&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Canterbury&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>44504.4990912&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>612000&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>30100&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.975326544288084&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>12&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Otago&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>31186.3091885&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>224200&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>26300&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.951169446933996&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>13&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Southland&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>31196.0603552&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>98300&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>29500&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.978506931196744&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>14&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Tasman&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>9615.9760349&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>51100&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>25700&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.971898130723874&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>15&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Nelson&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>422.195242&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>51400&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>27200&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.925967400771432&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>16&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>Name&emsp;<\/b><\/td><td align='right'>Marlborough&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>Island&emsp;<\/b><\/td><td align='right'>South&emsp;<\/td><\/tr><tr class='alt'><td>3<\/td><td><b>Land_area&emsp;<\/b><\/td><td align='right'>10457.7454853&emsp;<\/td><\/tr><tr><td>4<\/td><td><b>Population&emsp;<\/b><\/td><td align='right'>46200&emsp;<\/td><\/tr><tr class='alt'><td>5<\/td><td><b>Median_income&emsp;<\/b><\/td><td align='right'>27900&emsp;<\/td><\/tr><tr><td>6<\/td><td><b>Sex_ratio&emsp;<\/b><\/td><td align='right'>0.957792207792208&emsp;<\/td><\/tr><tr class='alt'><td>7<\/td><td><b>geom&emsp;<\/b><\/td><td align='right'>sfc_MULTIPOLYGON&emsp;<\/td><\/tr><tr><td>8<\/td><td><b>col&emsp;<\/b><\/td><td align='right'>#FFF50A33&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":2,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[166.426302922672,-47.282852412478,178.550373600413,-34.4145187159542,"Zoom to nz","<strong> nz <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"nz",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nz"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"nz","extra":null,"layerId":null,"className":"info legend","group":"nz"}]}],"limits":{"lat":[-47.282852412478,-34.4145187159542],"lng":[166.426302922672,178.550373600413]}},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      //map.on('click', function (e) {\n      //  var txt = document.querySelector('.lnlt').textContent;\n      //  console.log(txt);\n      //  //txt.innerText.focus();\n      //  //txt.select();\n      //  setClipboardText(txt);\n      //});\n\n      function setClipboardText(text){\n      var id = 'mycustom-clipboard-textarea-hidden-id';\n      var existsTextarea = document.getElementById(id);\n\n      if(!existsTextarea){\n      console.log('Creating textarea');\n      var textarea = document.createElement('textarea');\n      textarea.id = id;\n      // Place in top-left corner of screen regardless of scroll position.\n      textarea.style.position = 'fixed';\n      textarea.style.top = 0;\n      textarea.style.left = 0;\n\n      // Ensure it has a small width and height. Setting to 1px / 1em\n      // doesn't work as this gives a negative w/h on some browsers.\n      textarea.style.width = '1px';\n      textarea.style.height = '1px';\n\n      // We don't need padding, reducing the size if it does flash render.\n      textarea.style.padding = 0;\n\n      // Clean up any borders.\n      textarea.style.border = 'none';\n      textarea.style.outline = 'none';\n      textarea.style.boxShadow = 'none';\n\n      // Avoid flash of white box if rendered for any reason.\n      textarea.style.background = 'transparent';\n      document.querySelector('body').appendChild(textarea);\n      console.log('The textarea now exists :)');\n      existsTextarea = document.getElementById(id);\n      }else{\n      console.log('The textarea already exists :3')\n      }\n\n      existsTextarea.value = text;\n      existsTextarea.select();\n\n      try {\n      var status = document.execCommand('copy');\n      if(!status){\n      console.error('Cannot copy text');\n      }else{\n      console.log('The text is now on the clipboard');\n      }\n      } catch (err) {\n      console.log('Unable to copy.');\n      }\n      }\n\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>

---

# Web mapping applications

- Leaflet integrates with **shiny** via `leaflet::leafletOutput()`, enabling web mapping applications built on R
- These can be set-up to scale nationally, as illustrated by [pct.bike](http://www.pct.bike/)
(Lovelace, Goodman, Aldred, Berkoff, Abbas, and Woodcock, 2017).


![](https://raw.githubusercontent.com/npct/pct-team/master/figures/pct-frontpage.png)&lt;!-- --&gt;

---

# Exercises

1. Create a map showing the geographic distribution of the Human Development Index (`HDI`) across Africa with 
-base graphics (hint: use `plot()`) and
-**tmap** (hint: use `tm_shape(africa) + ...`).
    - Name two advantages of each approach
    - Bonus: What three other mapping packages could be used to show the same data?
    
--

## Starting point for the exercise:


```r
library(sf)
library(spData)
library(tidyverse)
africa = world %&gt;% 
  filter(continent == "Africa", !is.na(iso_a2)) %&gt;% 
  left_join(worldbank_df, by = "iso_a2") %&gt;% 
  select(name, subregion, gdpPercap, HDI, pop_growth) %&gt;% 
  st_transform("+proj=aea +lat_1=20 +lat_2=-23 +lat_0=0 +lon_0=25")
```

---

class: small
# References

Bivand, Roger S, Edzer Pebesma and Virgilio GÃ³mez-Rubio (2013).
_Applied Spatial Data Analysis with R_. 2nd ed. 2013 edition. New
York: Springer. 405 pp. ISBN: 978-1-4614-7617-7.

Cheng, Joe, Bhaskar Karambelkar and Yihui Xie (2018). _Leaflet:
Create Interactive Web Maps with the JavaScript 'Leaflet'
Library_. R package version 2.0.0. URL:
[https://CRAN.R-project.org/package=leaflet](https://CRAN.R-project.org/package=leaflet).

Lovelace, Robin, Anna Goodman, Rachel Aldred, et al. (2017). "The
Propensity to Cycle Tool: An Open Source Online System for
Sustainable Transport Planning". In: _Journal of Transport and
Land Use_ 10.1. ISSN: 1938-7849. DOI:
[10.5198/jtlu.2016.862](https://doi.org/10.5198/jtlu.2016.862).
URL:
[https://www.jtlu.org/index.php/jtlu/article/view/862](https://www.jtlu.org/index.php/jtlu/article/view/862)
(visited on Jun. 01, 2017).

Lovelace, Robin, Jakub Nowosad and Jannes Meunchow (2018).
_Geocomputation with R_. CRC Press. URL:
[http://robinlovelace.net/geocompr](http://robinlovelace.net/geocompr)
(visited on Oct. 05, 2017).

Murrell, Paul (2016). _R Graphics, Second Edition_. CRC Press. 536
pp. ISBN: 978-1-4398-3177-9. Google Books: googlebooks.

Talbert, Richard J. A. (2014). _Ancient Perspectives: Maps and
Their Place in Mesopotamia, Egypt, Greece, and Rome_. University
of Chicago Press. 284 pp. ISBN: 978-0-226-78940-8. Google Books:
googlebooks.

Tennekes, Martijn (2018). "Tmap: Thematic Maps in R". In: _Journal
of Statistical Software, Articles_ 84.6, pp. 1-39. ISSN:
1548-7660. DOI:
[10.18637/jss.v084.i06](https://doi.org/10.18637/jss.v084.i06).
URL:
[https://www.jstatsoft.org/v084/i06](https://www.jstatsoft.org/v084/i06).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLines": true,
"ratio": "4:3",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
